{% extends 'base.html' %}
{% load static %}
{% load memo_extras %}
{% block content %}
<style>
  .custom-tag {
    display: inline-block;
    font-size: 12px;
    height: 24px;
    line-height: 24px;
    border-radius: 8px;
    border: 1px solid #A0A0A0;
    padding: 0 10px;
    color: #A0A0A0;
  }
  .custom-tag2 {
    font-size: 12px;
    color: #A0A0A0;
  }
</style>

<main>
  <div class="position-fixed bottom-0 end-0 me-4 bd-mode-toggle" style="margin-bottom: 12rem!important;">
    <a href="{% url 'post' %}" class="py-2 d-flex align-items-center">
      <img src="{% static 'img/add_post.png' %}" width="56px" height="56px" alt="Add Post">
    </a>
  </div>
  

  <section class="py-1 text-center container d-flex justify-content-center">

    <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel" style="width: 320px;">

      <div class="carousel-inner">
          <div class="carousel-item active">
              <img src="{% static 'img/banner_1.png' %}" class="d-block w-100 h-100" alt="banner_1" style="border-radius: 16px;">
          </div>
          <div class="carousel-item">
              {% if user.is_authenticated %}
                <a href="{% url 'mypage' %}">
                  <img src="{% static 'img/banner_2.png' %}" class="d-block w-100 h-100" alt="banner_2" style="border-radius: 16px;">
                </a>
              {% else %}
                <a href="{% url 'signup_1' %}">
                  <img src="{% static 'img/banner_2.png' %}" class="d-block w-100 h-100" alt="banner_2" style="border-radius: 16px;">
                </a>
              {% endif %}
          </div>
      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>

      <div class="carousel-indicators mb-1">
        <button type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide-to="0" class="active" aria-label="Slide 1" aria-current="true"></button>
        <button type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide-to="1" aria-label="Slide 2" class=""></button>
      </div>

    </div>

  </section>

  <section class="mt-3 text-center container d-flex justify-content-center">

    <nav class="nav nav-underline justify-content-between">
  
      <div class="col col-md-3">
        <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
          <div class="card-body clickable-card" data-category-url="{% url 'category' 'Ï†ÑÏ≤¥' %}" style="cursor: pointer;">
            <img src="{% static 'img/category_all.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36" height="36" style="border-radius: 16px;">
            <span class="card-title text-center" style="font-size: 12px;">Ï†ÑÏ≤¥</span>
          </div>
        </div>
      </div>

      <div class="col col-md-3">
        <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
          <div class="card-body clickable-card" data-category-url="{% url 'category' 'ÏÑúÌïë' %}" style="cursor: pointer;">
            <img src="{% static 'img/category_surfing.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36" height="36" style="border-radius: 16px;">
            <span class="card-title text-center" style="font-size: 12px;">ÏÑúÌïë</span>
          </div>
        </div>
      </div>
      
      <div class="col col-md-3">
        <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
          <div class="card-body clickable-card" data-category-url="{% url 'category' 'Îã§Ïù¥Îπô' %}" style="cursor: pointer;">
            <img src="{% static 'img/category_diving.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36" height="36" style="border-radius: 16px;">
            <span class="card-title text-center" style="font-size: 12px;">Îã§Ïù¥Îπô</span>
          </div>
        </div>
      </div>  

      <div class="col col-md-3">
        <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
          <div class="card-body clickable-card" data-category-url="{% url 'category' 'Î†àÏù¥Ïã±' %}" style="cursor: pointer;">
            <img src="{% static 'img/category_racing.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36" height="36" style="border-radius: 16px;">
            <span class="card-title text-center" style="font-size: 12px;">Î†àÏù¥Ïã±</span>
          </div>
        </div>
      </div>

    </nav>
    
  </section>


  <section class="py-3 text-center container d-flex justify-content-center">

    <nav class="nav nav-underline justify-content-between">
  
      <div class="col col-md-3">
        <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
          <div class="card-body clickable-card" data-category-url="{% url 'category' 'Ï†ÑÏ≤¥' %}" style="cursor: pointer;">
            <img src="{% static 'img/category_gliding.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36" height="36" style="border-radius: 16px;">
            <span class="card-title text-center" style="font-size: 10px;">Í∏ÄÎùºÏù¥Îî©</span>
          </div>
        </div>
      </div>

      <div class="col col-md-3">
        <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
          <div class="card-body clickable-card" data-category-url="{% url 'category' 'ÏÑúÌïë' %}" style="cursor: pointer;">
            <img src="{% static 'img/category_leisure.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36" height="36" style="border-radius: 16px;">
            <span class="card-title text-center" style="font-size: 10px;">ÏàòÏÉÅÎ†àÏ†Ä</span>
          </div>
        </div>
      </div>
      
      <div class="col col-md-3">
        <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
          <div class="card-body clickable-card" data-category-url="{% url 'category' 'Îã§Ïù¥Îπô' %}" style="cursor: pointer;">
            <img src="{% static 'img/category_extreme.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36" height="36" style="border-radius: 16px;">
            <span class="card-title text-center" style="font-size: 10px; ">ÏùµÏä§Ìä∏Î¶º</span>
          </div>
        </div>
      </div>  

      <div class="col col-md-3">
        <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
          <div class="card-body clickable-card" data-category-url="{% url 'category' 'Î†àÏù¥Ïã±' %}" style="cursor: pointer;">
            <img src="{% static 'img/category_sports.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36" height="36" style="border-radius: 16px;">
            <span class="card-title text-center" style="font-size: 12px;">Ïä§Ìè¨Ï∏†</span>
          </div>
        </div>
      </div>

    </nav>
    
  </section>

  <div class="album py-3">
    <div class="container">
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-1 g-3">
        
        <div class="col d-flex justify-content-center">
          <div style="width: 320px; border-radius: 15px;">
            <span class="fw-bolder text-decoration-none" style="color: inherit; font-size: 16;">ÏßÄÍ∏à Îú®Îäî ÌõÑÍ∏∞ üî•</span>
          </div>
        </div>

        {% for memo in memo %}
        <a href="{% url 'detail' memo.id %}" class="text-decoration-none">
          <div class="col d-flex justify-content-center">
            <div class="card" style="width: 320px; border-radius: 15px;">
              <img src="{{memo.images.url}}" class="custom-image" alt="banner_1" style="border-top-left-radius: 15px; border-top-right-radius: 16px; width: 100%;">

              <div class="card-body">


                <div>
                  <span class="fw-bolder" style="font-size: 16px;">
                    {{memo.title}}
                  </span>
                </div>
                <div>
                  <span class="fw-normal" style="font-size: 14px;">
                    {{memo.text}}
                  </span>
                </div>

                <div class="mt-2">
                  {% for tag in memo.tag_set.all %}
                    <span class="custom-tag">
                      {{ tag.tag_name }}
                    </span>
                  {% endfor %}
                </div>

                <div>
                    <img src="{% static 'img/card_location.png' %}" width="12px" height="12px">
                    <span style="font-size: 12px; color: #A0A0A0;">{{memo.district}}</span>
                  </span>
                </div>


                <div class="d-flex">
                  <div>
                    <img src="{% static 'img/card_heart_tobe.png' %}" width="12px" height="12px">
                    <span class="custom-tag2">
                      <span="count{{ memo.id }}">{{ memo.total_likes }}</span>
                    </span>
                    <img src="{% static 'img/card_message_tobe.png' %}" width="12px" height="12px">
                    <span class="custom-tag2">
                      {{memo.comments.count}}
                    </span>
                  </div>
                  <div class="ms-auto">
                    <span class="custom-tag2">
                      {{ memo.create_date|date:"YÎÖÑ mÏõî dÏùº Ï≤¥Ìóò" }}
                    </span>
                  </div>
                </div>

              </div>





            </div>
          </div>
        </a>
        {% endfor %}

      </div>
    </div>
  </div>

  
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const clickableCards = document.querySelectorAll(".clickable-card");
      clickableCards.forEach(card => {
        card.addEventListener("click", function() {
          const categoryUrl = card.getAttribute("data-category-url");
          window.location.href = categoryUrl;
        });
      });
    });
  </script>
  

</main>

{% endblock %}
