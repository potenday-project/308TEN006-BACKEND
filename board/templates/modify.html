{% load static %}
<!doctype html>
<html lang="ko" data-bs-theme="auto">

<head>
    <script src="{% static 'assets/js/color-modes.js' %}"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.115.4">
    <title>Atee</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/album/">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link href="{% static 'assets/dist/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/main_styles.css' %}" rel="stylesheet">
    
    <style>
      .custom-form-control {
        border: none;
        border-radius: 0; /* ì„ íƒì ìœ¼ë¡œ border-radius ì¡°ì • */
      }

      .custom-input {
        height: 48px; /* ì…ë ¥ í•„ë“œì˜ ë†’ì´ */
        font-size: 16px; /* ë ˆë””ìŠ¤ í°íŠ¸ í¬ê¸° */
        text-align: left; /* ê°€ìš´ë° ì •ë ¬ */
        border-radius: 16px; /* ëª¨ì„œë¦¬ë¥¼ 20pxë¡œ ë‘¥ê¸€ê²Œ ë§Œë“¤ê¸° */
      }

      input[type="radio"] {
        display: none;
      }

    </style>


</head>

<body>

    <header data-bs-theme="light">
        <div class="navbar navbar-light mt-2">
            <div class="container d-flex justify-content-between align-items-center">
                <a class="btn" href="{% url 'index' %}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                    </svg>
                </a>
                <a href="{% url 'index' %}" class="text-center text-decoration-none" style="font-size: 18px; font-weight: bold; color: black;">
                    ì¹´í…Œê³ ë¦¬
                </a>
                <button type="submit" id="nextButton" class="btn next-button" style="outline: none; box-shadow: none; font-size: 16px; background: none; border: none; color: #FF6827;" onclick="handleNextButtonClick()">ì™„ë£Œ</button>
            </div>
        </div>
    </header>


<main>

  <form method="POST" class="post-form" enctype="multipart/form-data">
    {%csrf_token%}
    <div class="d-flex justify-content-center">
      <label for="id_img" class="mb-3 w-100">
        <img src="{{memo.images.url}}" alt="banner_1" width="360px" height="360px" id="uploaded-image" style="width: 100%;">
      </label>
    </div>

    <input type="file" name="images" accept="image/*" id="id_img" style="display: none;">
    <input type="number" name="price" id="id_price" style="display: none;" value="{{memo.price}}">

    <input type="text" name="title" class="form-control custom-form-control" maxlength="150" required id="id_title" placeholder="ì œëª©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”. (ìµœëŒ€ 00ì)" value="{{memo.title}}">
    <hr class="my-2">
    <textarea class="form-control custom-form-control" id="id_text-intro" rows="5" name="text" placeholder="ì²´í—˜í•˜ì‹  ì•¡í‹°ë¹„í‹°ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš” (ìµœëŒ€ 000ì)" style="height: 200px">{{memo.text}}</textarea>
    <hr class="my-2">

    
    <section class="mt-3 text-center container d-flex justify-content-start">
      <span>ì¹´í…Œê³ ë¦¬ ì„ íƒ âœ¨</span>
    </section>

    <section class="mt-3 text-center container d-flex justify-content-center">
      <nav class="nav nav-underline justify-content-between">
        <div class="col col-md-3">
          <div class="card" style="border-radius: 16px; background-color: #FFFFFF; border: 2px solid #F0F0F0;">
            <div class="card-body clickable-card" style="cursor: pointer;">
                <img src="{% static 'img/category_eyes.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36px" height="36px" style="border-radius: 16px;">
                <span class="card-title text-center" style="font-size: 12px;">ğŸ‘‰ğŸ‘‰</span>
            </div>
        </div>
          <input class="form-check-input" type="radio" name="category" id="category2" value="ì„œí•‘" required data-category="ì„œí•‘">
          <div class="col col-md-3">
            <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
              <div class="card-body clickable-card" data-category-url="{% url 'category' 'ì„œí•‘' %}" data-radio-id="category2" style="cursor: pointer;">
                <img src="{% static 'img/category_surfing.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36px" height="36px" style="border-radius: 16px;" onclick="handleRadioClick('category2');">
                <span class="card-title text-center" style="font-size: 12px;">ì„œí•‘</span>
              </div>
            </div>
          </div>
          <input class="form-check-input" type="radio" name="category" id="category3" value="ë‹¤ì´ë¹™" required data-category="ë‹¤ì´ë¹™">
          <div class="col col-md-3">
            <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
              <div class="card-body clickable-card" data-category-url="{% url 'category' 'ë‹¤ì´ë¹™' %}" data-radio-id="category3" style="cursor: pointer;">
                <img src="{% static 'img/category_diving.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36px" height="36px" style="border-radius: 16px;" onclick="handleRadioClick('category3');">
                <span class="card-title text-center" style="font-size: 12px;">ë‹¤ì´ë¹™</span>
              </div>
            </div>
          </div>  
          <input class="form-check-input" type="radio" name="category" id="category4" value="ë ˆì´ì‹±" required data-category="ë ˆì´ì‹±">
          <div class="col col-md-3">
            <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
              <div class="card-body clickable-card" data-category-url="{% url 'category' 'ë ˆì´ì‹±' %}" data-radio-id="category4" style="cursor: pointer;">
                <img src="{% static 'img/category_racing.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36px" height="36px" style="border-radius: 16px;" onclick="handleRadioClick('category4');">
                <span class="card-title text-center" style="font-size: 12px;">ë ˆì´ì‹±</span>
              </div>
            </div>
          </div>
      </nav>
    </section>

    <section class="mt-3 mb-3 text-center container d-flex justify-content-center">
      <nav class="nav nav-underline justify-content-between">

          <input class="form-check-input" type="radio" name="category" id="category5" value="ê¸€ë¼ì´ë”©" required data-category="ê¸€ë¼ì´ë”©">
          <div class="col col-md-3">
            <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
              <div class="card-body clickable-card" data-category-url="{% url 'category' 'ê¸€ë¼ì´ë”©' %}" data-radio-id="category5" style="cursor: pointer;">
                <img src="{% static 'img/category_gliding.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36px" height="36px" style="border-radius: 16px;" onclick="handleRadioClick('category5');">
                <span class="card-title text-center" style="font-size: 10px;">ê¸€ë¼ì´ë”©</span>
              </div>
            </div>
          </div>
          
          <input class="form-check-input" type="radio" name="category" id="category6" value="ìˆ˜ìƒë ˆì €" required data-category="ìˆ˜ìƒë ˆì €">
          <div class="col col-md-3">
            <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
              <div class="card-body clickable-card" data-category-url="{% url 'category' 'ìˆ˜ìƒë ˆì €' %}" data-radio-id="category6" style="cursor: pointer;">
                <img src="{% static 'img/category_leisure.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36px" height="36px" style="border-radius: 16px;" onclick="handleRadioClick('category6');">
                <span class="card-title text-center" style="font-size: 10px;">ìˆ˜ìƒë ˆì €</span>
              </div>
            </div>
          </div>

          <input class="form-check-input" type="radio" name="category" id="category7" value="ìµìŠ¤íŠ¸ë¦¼" required data-category="ìµìŠ¤íŠ¸ë¦¼">
          <div class="col col-md-3">
            <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
              <div class="card-body clickable-card" data-category-url="{% url 'category' 'ìµìŠ¤íŠ¸ë¦¼' %}" data-radio-id="category7" style="cursor: pointer;">
                <img src="{% static 'img/category_extreme.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36px" height="36px" style="border-radius: 16px;" onclick="handleRadioClick('category7');">
                <span class="card-title text-center" style="font-size: 10px; ">ìµìŠ¤íŠ¸ë¦¼</span>
              </div>
            </div>
          </div>  

          <input class="form-check-input" type="radio" name="category" id="category8" value="ìŠ¤í¬ì¸ " required data-category="ìŠ¤í¬ì¸ ">
          <div class="col col-md-3">
            <div class="card" style="border-radius: 16px; background-color: #F5F5F5; border: none;">
              <div class="card-body clickable-card" data-category-url="{% url 'category' 'ìŠ¤í¬ì¸ ' %}" data-radio-id="category8" style="cursor: pointer;">
                <img src="{% static 'img/category_sports.png' %}" class="d-block mx-auto mb-1" alt="banner_2" width="36px" height="36px" style="border-radius: 16px;" onclick="handleRadioClick('category8');">
                <span class="card-title text-center" style="font-size: 12px;">ìŠ¤í¬ì¸ </span>
              </div>
            </div>
          </div>
          
      </nav>
    </section>

    <section class="py-3 text-center container d-flex justify-content-center">
      <input type="text" class="form-control custom-input" id="id_tag_text" name="tag_text" value="{% for tag in tag_all %}{{ tag }} {% endfor %}" placeholder="#í•´ì‹œíƒœê·¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. (ìµœëŒ€ nê°œ)">
    </section>
    
    <section class="py-3 text-center container d-flex justify-content-start">
      <span>ì²´í—˜ ë‚ ì§œ ğŸ”—</span>
    </section> 

    <section class="text-center container d-flex justify-content-center">
      <input type="date" class="form-control custom-input" id="id_platform" name="experience_date" value="{{ memo.experience_date|date:'Y-m-d' }}" required id="id_experience_date" placeholder="ì˜ˆì•½ ë§í¬ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.">
    </section>
      
    <section class="py-3 text-center container d-flex justify-content-start">
      <span>ìœ„ì¹˜ ì •ë³´ ğŸ“</span>
    </section> 

    <section class="text-center container d-flex justify-content-center">
      <input type="text" class="form-control custom-input" id="id_district" name="district" placeholder="ì•¡í‹°ë¹„í‹° ì¥ì†Œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”." value="{{memo.district}}">
    </section>
    
    <section class="py-3 text-center container d-flex justify-content-start">
      <span>ì˜ˆì•½ ì •ë³´ ğŸ”—</span>
      <span style="font-size: 10px;">(ì„ íƒ)</span>
    </section> 

    <section class="text-center container d-flex justify-content-center mb-5">
      <input type="text" class="form-control custom-input" id="id_platform" name="platform" placeholder="ì˜ˆì•½ ë§í¬ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”." value="{{memo.platform}}">
    </section>

  </form>

</main>


<script>


  document.addEventListener('DOMContentLoaded', function() {
        var currentDate = new Date();
        var formattedDate = currentDate.toISOString().substr(0, 10); // YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        var dateInput = document.getElementById('id_platform');
        dateInput.value = formattedDate;
    });

  document.addEventListener('DOMContentLoaded', function() {
    const clickableCards = document.querySelectorAll('.clickable-card');
    clickableCards.forEach(card => {
      card.addEventListener('click', function() {
        const radioId = this.getAttribute('data-radio-id');
        const radioInput = document.getElementById(radioId);
        if (radioInput) {
          // í•´ë‹¹ ë¼ë””ì˜¤ ë²„íŠ¼ ì²´í¬
          radioInput.checked = true;
          
          // ë‹¤ë¥¸ ë¼ë””ì˜¤ ë²„íŠ¼ í•´ì œ
          const otherRadioInputs = document.querySelectorAll('.form-check-input:not(#' + radioId + ')');
          otherRadioInputs.forEach(input => {
            input.checked = false;
          });
        }
      });
    });
  });

  function handleNextButtonClick() {
      // í¼ ê°€ì ¸ì˜¤ê¸°
      var form = document.querySelector('form');

      // ì—…ë¡œë“œëœ ì´ë¯¸ì§€ í™•ì¸
      var uploadedImage = document.getElementById('uploaded-image');
      if (!uploadedImage.getAttribute('src')) {
          alert('ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.');
          return; // ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
      }

      // ì œëª© í™•ì¸
      var titleInput = document.getElementById('id_title');
      if (!titleInput.value) {
          alert('ì œëª©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
          return; // ì œëª©ì´ ì—†ìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
      }

      // ë‚´ìš© í™•ì¸
      var textArea = document.getElementById('id_text-intro');
      if (!textArea.value) {
          alert('ì²´í—˜ ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
          return; // ë‚´ìš©ì´ ì—†ìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
      }
      
      // ì¹´í…Œê³ ë¦¬ í™•ì¸
      var categoryRadios = document.querySelectorAll('input[name="category"]');
      var selectedCategory = false;
      categoryRadios.forEach(function(radio) {
          if (radio.checked) {
              selectedCategory = true;
          }
      });
      if (!selectedCategory) {
          alert('ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
          return; // ì¹´í…Œê³ ë¦¬ê°€ ì„ íƒë˜ì§€ ì•Šìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
      }

      // í•´ì‹œíƒœê·¸ í™•ì¸
      var tagInput = document.getElementById('id_tag_text');
      var tagText = tagInput.value;
      if (!tagText.match(/^#\w+(\s#?\w+)*$/)) {
          alert('ì˜¬ë°”ë¥¸ í˜•ì‹ìœ¼ë¡œ í•´ì‹œíƒœê·¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. ì˜ˆì‹œ: #íƒœê·¸1 #íƒœê·¸2 #íƒœê·¸3');
          return; // í•´ì‹œíƒœê·¸ í˜•ì‹ì´ ë§ì§€ ì•Šìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
      }

      // ìœ„ì¹˜ ì •ë³´ í™•ì¸
      var districtInput = document.getElementById('id_district');
      if (!districtInput.value) {
          alert('ì•¡í‹°ë¹„í‹° ì¥ì†Œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.');
          return; // ìœ„ì¹˜ ì •ë³´ê°€ ì—†ìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
      }

      // í¼ ì œì¶œ
      if (form) {
          form.submit();
      }
  }

  const input = document.getElementById('id_img');
  const uploadedImage = document.getElementById('uploaded-image');

  input.addEventListener('change', function() {
      const file = this.files[0];
      if (file) {
          const reader = new FileReader();
          reader.onload = function(event) {
              uploadedImage.src = event.target.result;
          }
          reader.readAsDataURL(file);
      }
  });

  document.addEventListener("DOMContentLoaded", function() {
    const radios = document.querySelectorAll('input[type="radio"]');
    
    radios.forEach(radio => {
      const cardBody = radio.nextElementSibling.querySelector('.card-body');
      const memoCategory = radio.getAttribute('data-category'); // ë°ì´í„° ì†ì„± ê°’ ê°€ì ¸ì˜¤ê¸°
      if ("{{ memo.category }}" === memoCategory) {
        cardBody.style.backgroundColor = '#FF6827';
        cardBody.style.borderRadius = '16px';  // ë³€ê²½ëœ border-radius ê°’
        radio.checked = true;
      } else {
        cardBody.style.backgroundColor = '#F5F5F5';
        cardBody.style.borderRadius = '16px';  // ì›ë˜ì˜ border-radius ê°’
      }
    });
  });
  
  function handleRadioClick(radioId) {
    const radios = document.querySelectorAll('input[type="radio"]');
    radios.forEach(radio => {
      const cardBody = radio.nextElementSibling.querySelector('.card-body');
      if (radio.id === radioId) {
        cardBody.style.backgroundColor = '#FF6827';
        cardBody.style.borderRadius = '16px';  // ë³€ê²½ëœ border-radius ê°’
      } else {
        cardBody.style.backgroundColor = '#F5F5F5';
        cardBody.style.borderRadius = '16px';  // ì›ë˜ì˜ border-radius ê°’
      }
    });
  }

</script>
</body>
</html>
